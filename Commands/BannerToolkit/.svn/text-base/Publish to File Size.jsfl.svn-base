fl.outputPanel.clear();// INCLUDE:var UTIL_PATH = fl.configURI + "Commands/utils/";eval(FLfile.read(UTIL_PATH + "Include.jsfl"));include(UTIL_PATH + "Log.jsfl");include(UTIL_PATH + "Json2.jsfl");include(UTIL_PATH + "Utils.jsfl");include(UTIL_PATH + "Panel.jsfl");var utils = new Utils();var panel = new Panel();// CLASS:var PANEL = fl.configURI + "Commands/banners/Publish to File Size.xml";init();function init(){	clearLog();    showPanel();}function showPanel(){	var panelOutput = panel.show(PANEL);    if (panelOutput.dismiss == "accept"){        showPanelResult(panelOutput);    }}function showPanelResult(result){	var targetSize = parseInt(result.targetSize);	var startQuality = parseInt(result.startQuality);	var targetInterval = parseInt(result.targetInterval);	if (targetSize > 0 && startQuality > 0 && startQuality <= 100 && targetInterval > 0){		publishToFileSize(targetSize, startQuality, targetInterval);	}}function publishToFileSize(targetSize, startQuality, targetInterval) {		var doc = fl.getDocumentDOM();	var fileURI = doc.pathURI;    var fileName = fileURI.split("/").pop();    var folderPath = fileURI.split(fileName)[0];	var xml = eval(doc.exportPublishProfileString());	var swfFile = folderPath + xml..PublishFormatProperties.flashFileName;	var sizeReached = false;	var iterations = parseInt(startQuality / targetInterval);	log("TARGET SIZE:" + targetSize, "targetInterval:" + targetInterval, "iterations:" + iterations);	for(var i=0; i< iterations; i++){		var flashProps = xml..PublishFlashProperties; 		var quality = startQuality - (targetInterval * i);		flashProps.Quality = quality;		doc.importPublishProfileString(xml);		doc.publish();		if (FLfile.exists(swfFile)){			var fileSize = parseInt(FLfile.getSize(swfFile) / 1000);			log("Quality:" + quality, "KB:" + fileSize);			if (fileSize < targetSize){				sizeReached = true;				break;			}		}	}		if (sizeReached){		log("TARGET SIZE HAS BEEN REACHED. YAY!");	} else {		log("TARGET SIZE CANT BE REACHED. :(");	}	traceLog();/*    FLfile.createFolder()    FLfile.exists()    FLfile.getAttributes()    FLfile.getSize()    fl.fileExists()    */}